<%= tinymce_assets %>
<%= form_for(article) do |f| %>
  <% if article.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(article.errors.count, "error") %> prohibited this article from being saved:</h2>

      <ul>
      <% article.errors.full_messages.each do |message| %>
        <li><%= message %></li>
      <% end %>
      </ul>
    </div>
  <% end %>

  <div class="field">
    <%= f.label :title %>
    <%= f.text_field :title, class: "form-control"%>
  </div>
  <div class="field">
    <%= f.label "Artist" %>

  <%= f.collection_select :band_id, Band.order(:group_name), :id, :group_name, {include_blank: true, class: "form-control"}, { placeholder: "Type Artist Name Here"} %>
  </div>
  <hr>
        <h3> Photos </h3>
    <%= f.fields_for :article_photos do |builder| %>
      
        <%= render 'article_photo_fields', :f => builder %>

    <% end %>
    <%= link_to_add_more_fields "Add more photos to this article", f, :article_photos %>
    <hr>

  <div class="field article-editor">
    <%= f.label :body %>
    <%= f.text_area :body, :class => "tinymce", :rows => 40, :cols => 120 %>
  </div>

  <% if current_user.admin? || current_user.editor? %>
  <hr>
  <h2> Editor Tools </h2>
  <br/>
  <div class="field">
    <%= f.label "Make Public?" %>
    <%= f.select :public, options_for_select([["#{f.object.public}", "#{f.object.public}"], ["FALSE", "FALSE"], ["TRUE", "TRUE"]]), class: "form-control" %>
  </div>
  <br/>
  <% end %>
  <div class="actions">
    <br/>
    <%= f.submit 'Save', class: "btn btn-lg btn-block btn-success" %>
  </div>
<% end %>
<script type="text/javascript">
  $(function() {
  $('#article_band_id').selectize({
    create: true
  });
});
</script>
<script type="text/javascript">
  tinyMCE.init({
    selector: '#article_body'
  });
</script>